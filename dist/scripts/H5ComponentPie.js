var H5ComponentPie=function(t,e){var a=new H5ComponentBase(t,e),n=2*a.width(),i=2*a.height(),o=document.createElement("canvas"),s=o.getContext("2d");o.width=s.width=n,o.height=s.height=i,$(o).css("zIndex","1"),a.append(o);var c=n/2;s.beginPath(),s.fillStyle="#eee",s.strokeStyle="#eee",s.lineWidth=1,s.arc(c,c,c,0,2*Math.PI),s.fill(),s.stroke();var o=document.createElement("canvas"),s=o.getContext("2d");o.width=s.width=n,o.height=s.height=i,$(o).css("zIndex","2"),a.append(o);for(var r=["red","green","blue","#a00","orange"],h=1.5*Math.PI,d=0,l=2*Math.PI,v=e.data.length,f=0;f<v;f++){var p=e.data[f],g=p[2]||(p[2]=r.pop());d=h+l*p[1],s.beginPath(),s.fillStyle=g,s.strokeStyle=g,s.lineWidth=.1,s.moveTo(c,c),s.arc(c,c,c,h,d),s.fill(),s.stroke(),h=d;var m=$('<div class="text">');m.text(e.data[f][0]);var u=$('<div class="per">');u.text(100*e.data[f][1]+"%"),m.append(u);var P=c+Math.sin(.5*Math.PI-h)*c,x=c+Math.cos(.5*Math.PI-h)*c;m.css("transition","all .5s "+.1*f+"s"),P>n/2?m.css("left",P/2+5):m.css("right",(n-P)/2+5),x>i/2?m.css("top",x/2+5):m.css("bottom",(i-x)/2+5),e.data[f][2]&&m.css("color",e.data[f][2]),m.css("opacity",0),a.append(m)}var o=document.createElement("canvas"),s=o.getContext("2d");o.width=s.width=n,o.height=s.height=i,$(o).css("zIndex","3"),a.append(o);var c=n/2;s.beginPath(),s.fillStyle="#eee",s.strokeStyle="#eee",s.lineWidth=1,s.arc(c,c,c,0,2*Math.PI),s.fill(),s.stroke();var I=function(t){s.clearRect(0,0,n,i),s.beginPath(),s.moveTo(c,c),t<=0?(s.arc(c,c,c,0,2*Math.PI),a.find(".text").css("opacity",0)):s.arc(c,c,c,h,h+2*Math.PI*t,!0),s.fill(),s.stroke(),t>=1&&(a.find(".text").css("opacity",1),s.clearRect(0,0,n,i))};return I(0),a.on("onLoad",function(){for(var t=0,e=0;e<100;e++)setTimeout(function(){t+=.01,I(t)},10*e+500)}),a.on("onLeave",function(){for(var t=1,e=0;e<100;e++)setTimeout(function(){t-=.01,I(t)},10*e)}),a};